!function(){var a;a=function(){function a(a){var b,c,d,e;if(!a.name)throw this.errors.invalidRouteName;if(!a.url)throw this.errors.invalidRouteUrl;if(b=a.name.trim(),e=("/"===a.url[0]?a.url:"/"+a.url).trim(),d="^"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"\\/?(#.*)?(\\?.*)?$",d=d.replace(this.parameterRegex,"([a-z0-9]+)"),c=a.url.match(this.parameterRegex),!b)throw this.errors.invalidRouteName;if(!e)throw this.errors.invalidRouteUrl;this.component=b,this.parameters=c?c.map(function(a){return a.slice(1)}):[],this.regex=new RegExp(d,"i")}return a.prototype.errors={invalidRouteName:"Route has no name",invalidRouteUrl:"Route has an invalid URL"},a.prototype.parameterRegex=/:([a-z][a-z0-9]+)/gi,a.prototype.clashesWith=function(a){return a.component===this.component||a.regex.toString()===this.regex.toString()},a.prototype.matches=function(a){return this.regex.test(a)},a.prototype.extractParameters=function(a){var b,c,d,e,f;if(e={},this.parameters.length)for(d=a.match(this.regex).slice(1),c=b=0,f=this.parameters.length-1;f>=0?f>=b:b>=f;c=f>=0?++b:--b)e[this.parameters[c]]=d[c];return e},a}();var b;b=function(){function b(b){var c,d,e,f;for(this.current=ko.observable(null),this.routes=[],c=0,d=b.length;d>c;c++){if(e=b[c],!e)throw this.errors.invalidRoute;if(f=new a(e),this.routes.filter(function(a){return f.clashesWith(a)}).length)throw this.errors.duplicateRoute;e.component&&ko.components.register(f.component,e.component),this.routes.push(f)}}return b.prototype.errors={invalidRoute:"Invalid route",duplicateRoute:"Route clashes with existing route"},b.prototype.go=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(m=this.routes.filter(function(b){return b.matches(a)})[0]){if(i={},c=null,d=a.indexOf("#")+1,j=a.indexOf("?")+1,d>0&&(1>j&&(c=a.slice(d)),j>d&&(c=a.slice(d,+(j-2)+1||9e9))),j>0)for(k=a.slice(j).split("&"),e=0,f=k.length;f>e;e++)h=k[e],b=h.indexOf("="),g=null,n=null,b>0?(l=h.split("="),g=l[0],n=l[1]):g=h,i[g]?n&&("array"==typeof i[g]?i[g].push(n):i[g]=[i[g],n]):i[g]=n;return this.current({component:m.component,parameters:m.extractParameters(a),hash:c,query:i})}return this.current(null)},b}();var c;c=function(a){var b;return b=function(){function b(){this.router=null,this.baseUrl=location.protocol+"//"+location.host}return b.prototype.init=function(b,c){if(this.router)throw"Router has already been initialised";return this.router=new Router(b),this.router.go(location.pathname),c||(c=document.body),c.setAttribute("data-bind","component: { name: current().compoent, params: { params: current().parameters, hash: current().hash, query: current().query } }"),document.body.addEventListener("click",function(a){return function(b){return"a"===b.target.tagName.toLowerCase()&&b.target.href.slice(0,a.baseUrl.length)===a.baseUrl?(a.go(b.target.href.slice(a.baseUrl.length)),b.stopPropagation(),b.preventDefault()):void 0}}(this),!1),a.applyBindings(this.router)},b.prototype.go=function(a){if(!this.router)throw"Router has not been initialised";return history.pushState(null,null,a),this.router.go(a)},b}(),a.singlePage?void 0:a.singlePage=new b};"function"==typeof define&&define.amd;if(amdAvailble&&define(["knockout"],c),ko)c(ko);else if(!amdAvailble)throw"Unable to find knockout"}();